{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\StrangersThings\\\\src\\\\components\\\\Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport { callApi } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Register = ({\n  action,\n  setToken\n}) => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const isLogin = action === 'login';\n  const title = isLogin ? 'Login' : 'Register';\n  const oppositAction = isLogin ? 'register' : 'login';\n  const oppositeTitle = isLogin ? 'Register' : 'Login';\n  const history = useHistory();\n\n  const userPassSubmit = async event => {\n    event.preventDefault();\n    const data = await callApi({\n      url: `users/${action}`,\n      body: {\n        user: {\n          username,\n          password\n        }\n      },\n      method: 'POST'\n    });\n    console.log(\"Register data:\", data);\n    const token = data.data.token;\n\n    if (token) {\n      localStorage.setItem('st-token', token);\n      setToken(token);\n      history.push('/');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      id: \"registerhead\",\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: userPassSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"username\",\n        required: true,\n        value: username,\n        onChange: event => setUsername(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"password\",\n        value: password,\n        onChange: event => setPassword(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Register, \"tv8EzuaX//5WlTHeteRkd5b7x4w=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Projects/StrangersThings/src/components/Register.js"],"names":["React","useState","Link","useHistory","callApi","Register","action","setToken","username","setUsername","password","setPassword","isLogin","title","oppositAction","oppositeTitle","history","userPassSubmit","event","preventDefault","data","url","body","user","method","console","log","token","localStorage","setItem","push","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,SAASC,OAAT,QAAwB,QAAxB;;;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAD,KAA0B;AAAA;;AACvC,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAMW,OAAO,GAAGN,MAAM,KAAK,OAA3B;AACA,QAAMO,KAAK,GAAGD,OAAO,GAAG,OAAH,GAAa,UAAlC;AACA,QAAME,aAAa,GAAGF,OAAO,GAAG,UAAH,GAAgB,OAA7C;AACA,QAAMG,aAAa,GAAGH,OAAO,GAAG,UAAH,GAAgB,OAA7C;AACA,QAAMI,OAAO,GAAGb,UAAU,EAA1B;;AAEA,QAAMc,cAAc,GAAG,MAAOC,KAAP,IAAiB;AACpCA,IAAAA,KAAK,CAACC,cAAN;AAEA,UAAMC,IAAI,GAAG,MAAMhB,OAAO,CAAC;AACvBiB,MAAAA,GAAG,EAAG,SAAQf,MAAO,EADE;AAEvBgB,MAAAA,IAAI,EAAE;AAAEC,QAAAA,IAAI,EAAE;AAAEf,UAAAA,QAAF;AAAYE,UAAAA;AAAZ;AAAR,OAFiB;AAGvBc,MAAAA,MAAM,EAAE;AAHe,KAAD,CAA1B;AAKRC,IAAAA,OAAO,CAACC,GAAR,CAAa,gBAAb,EAA+BN,IAA/B;AACY,UAAMO,KAAK,GAAGP,IAAI,CAACA,IAAL,CAAUO,KAAxB;;AAEA,QAAIA,KAAJ,EAAU;AACNC,MAAAA,YAAY,CAACC,OAAb,CAAsB,UAAtB,EAAkCF,KAAlC;AACApB,MAAAA,QAAQ,CAACoB,KAAD,CAAR;AACAX,MAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACH;AAEN,GAjBH;;AAmBA,sBAEI;AAAA,4BACA;AAAI,MAAA,EAAE,EAAC,cAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,eAGA;AAAM,MAAA,QAAQ,EAAEb,cAAhB;AAAA,8BAEI;AACI,QAAA,IAAI,EAAC,MADT;AAEI,QAAA,WAAW,EAAC,UAFhB;AAGI,QAAA,QAAQ,MAHZ;AAII,QAAA,KAAK,EAAET,QAJX;AAKI,QAAA,QAAQ,EAAGU,KAAD,IAAWT,WAAW,CAACS,KAAK,CAACa,MAAN,CAAaC,KAAd;AALpC;AAAA;AAAA;AAAA;AAAA,cAFJ,eAUQ;AACI,QAAA,IAAI,EAAC,MADT;AAEI,QAAA,WAAW,EAAC,UAFhB;AAGI,QAAA,KAAK,EAAEtB,QAHX;AAII,QAAA,QAAQ,EAAGQ,KAAD,IAAWP,WAAW,CAACO,KAAK,CAACa,MAAN,CAAaC,KAAd;AAJpC;AAAA;AAAA;AAAA;AAAA,cAVR,eAiBQ;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAjBR;AAAA;AAAA;AAAA;AAAA;AAAA,YAHA;AAAA,kBAFJ;AA2BC,CAxDL;;GAAM3B,Q;UAQcF,U;;;KARdE,Q;AA0DF,eAAeA,QAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { callApi } from \"../api\";\r\n\r\nconst Register = ({ action, setToken }) => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const isLogin = action === 'login';\r\n    const title = isLogin ? 'Login' : 'Register';\r\n    const oppositAction = isLogin ? 'register' : 'login';\r\n    const oppositeTitle = isLogin ? 'Register' : 'Login';\r\n    const history = useHistory();\r\n\r\n    const userPassSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        const data = await callApi({\r\n            url: `users/${action}`,\r\n            body: { user: { username, password }},\r\n            method: 'POST',\r\n        });\r\nconsole.log (\"Register data:\", data)\r\n            const token = data.data.token;\r\n\r\n            if (token){\r\n                localStorage.setItem( 'st-token', token );\r\n                setToken(token);\r\n                history.push('/');\r\n            }\r\n           \r\n      };\r\n\r\n    return (\r\n\r\n        <>\r\n        <h2 id=\"registerhead\">Register</h2>\r\n\r\n        <form onSubmit={userPassSubmit}>\r\n\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"username\"\r\n                required\r\n                value={username}\r\n                onChange={(event) => setUsername(event.target.value)}>\r\n                </input>\r\n    \r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"password\"\r\n                    value={password}\r\n                    onChange={(event) => setPassword(event.target.value)}>\r\n                </input>\r\n                    \r\n                <button type=\"submit\">Register</button>\r\n    \r\n            </form>\r\n            </>\r\n        );\r\n    };\r\n    \r\n    export default Register;\r\n    "]},"metadata":{},"sourceType":"module"}