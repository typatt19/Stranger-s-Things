{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\StrangersThings\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, Route } from \"react-router-dom\";\nimport { callApi } from '../api';\nimport { Register } from './';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst fetchUserData = async token => {\n  const {\n    data\n  } = await callApi({\n    url: '/users/me',\n    token\n  });\n  return data;\n};\n\nconst App = () => {\n  _s();\n\n  const [token, setToken] = useState('');\n  const [userData, setUserData] = useState({});\n  const isLoggedIn = userData.username !== undefined;\n\n  const onLogOutClick = () => {\n    localStorage.removeItem('st-token');\n    setToken(\"\"), setUserData({});\n  };\n\n  useEffect(async () => {\n    if (!token) {\n      setToken(localStorage.getItem('st-token'));\n      return;\n    }\n\n    const data = await fetchUserData(token);\n    setUserData(data);\n  }, [token]);\n  console.log(`token is: ${token}`);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Stranger's Things Registration Form\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/\",\n      children: isLoggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" Hello, \", userData.username, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogOutClick,\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/register\",\n      children: /*#__PURE__*/_jsxDEV(Register, {\n        action: \"register\",\n        setToken: setToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/login\",\n      children: /*#__PURE__*/_jsxDEV(Register, {\n        action: \"login\",\n        setToken: setToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(App, \"1ze2Nr7NRJHFKOYyJ841EhgyDC4=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Projects/StrangersThings/src/components/App.js"],"names":["React","useState","useEffect","Link","Route","callApi","Register","fetchUserData","token","data","url","App","setToken","userData","setUserData","isLoggedIn","username","undefined","onLogOutClick","localStorage","removeItem","getItem","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,KAAf,QAA4B,kBAA5B;AACA,SAASC,OAAT,QAAwB,QAAxB;AACA,SAASC,QAAT,QAAyB,IAAzB;;;;AAEA,MAAMC,aAAa,GAAG,MAAOC,KAAP,IAAiB;AACnC,QAAM;AAAEC,IAAAA;AAAF,MAAW,MAAMJ,OAAO,CAAE;AAC5BK,IAAAA,GAAG,EAAE,WADuB;AAE5BF,IAAAA;AAF4B,GAAF,CAA9B;AAIA,SAAOC,IAAP;AACH,CAND;;AASA,MAAME,GAAG,GAAG,MAAM;AAAA;;AAEd,QAAM,CAACH,KAAD,EAAQI,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAMc,UAAU,GAAGF,QAAQ,CAACG,QAAT,KAAsBC,SAAzC;;AAEA,QAAMC,aAAa,GAAG,MAAM;AACxBC,IAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACAR,IAAAA,QAAQ,CAAC,EAAD,CAAR,EACAE,WAAW,CAAC,EAAD,CADX;AAEH,GAJD;;AAMAZ,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAI,CAACM,KAAL,EAAY;AACRI,MAAAA,QAAQ,CAACO,YAAY,CAACE,OAAb,CAAqB,UAArB,CAAD,CAAR;AACA;AACH;;AACD,UAAMZ,IAAI,GAAG,MAAMF,aAAa,CAACC,KAAD,CAAhC;AACAM,IAAAA,WAAW,CAACL,IAAD,CAAX;AAEH,GARQ,EAQN,CAACD,KAAD,CARM,CAAT;AAUAc,EAAAA,OAAO,CAACC,GAAR,CAAa,aAAYf,KAAM,EAA/B;AAEA,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAA,gBACCO,UAAU,gBACH;AAAA,gCACA;AAAA,iCAAcF,QAAQ,CAACG,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA;AAAQ,UAAA,OAAO,EAAIE,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA;AAAA,sBADG,gBAMH;AAAA,gCACA;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADA,eAKA;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBALA;AAAA;AAPR;AAAA;AAAA;AAAA;AAAA,YAFJ,eAqBI,QAAC,KAAD;AAAO,MAAA,IAAI,EAAE,WAAb;AAAA,6BACI,QAAC,QAAD;AAAU,QAAA,MAAM,EAAC,UAAjB;AAA4B,QAAA,QAAQ,EAAEN;AAAtC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YArBJ,eAyBI,QAAC,KAAD;AAAO,MAAA,IAAI,EAAE,QAAb;AAAA,6BACI,QAAC,QAAD;AAAU,QAAA,MAAM,EAAC,OAAjB;AAAyB,QAAA,QAAQ,EAAEA;AAAnC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAzBJ;AAAA,kBADJ;AAgCH,CAzDD;;GAAMD,G;;KAAAA,G","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport { callApi } from '../api';\r\nimport { Register } from './';\r\n\r\nconst fetchUserData = async (token) => {\r\n    const { data } = await callApi ({\r\n        url: '/users/me',\r\n        token,\r\n    });\r\n    return data;\r\n};\r\n\r\n\r\nconst App = () => {\r\n\r\n    const [token, setToken] = useState('');\r\n    const [userData, setUserData] = useState({});\r\n\r\n    const isLoggedIn = userData.username !== undefined;\r\n\r\n    const onLogOutClick = () => {\r\n        localStorage.removeItem('st-token');\r\n        setToken(\"\"),\r\n        setUserData({});\r\n    };\r\n\r\n    useEffect(async () => {\r\n        if (!token) {\r\n            setToken(localStorage.getItem('st-token'));\r\n            return;\r\n        }\r\n        const data = await fetchUserData(token);\r\n        setUserData(data);\r\n\r\n    }, [token]);\r\n\r\n    console.log(`token is: ${token}`);\r\n\r\n    return(\r\n        <>\r\n            <h1>Stranger's Things Registration Form</h1>\r\n            <Route exact path='/'>\r\n            {isLoggedIn ? (\r\n                    <>\r\n                    <div> Hello, {userData.username} </div>\r\n                    <button onClick = {onLogOutClick}>Log Out</button>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                    <button>\r\n                        <Link to='/register'>Register</Link>\r\n                    </button>\r\n\r\n                    <button>\r\n                        <Link to='/login'>Login</Link>\r\n                    </button>\r\n                    </>\r\n                )}\r\n            </Route>\r\n\r\n            <Route path ='/register'>\r\n                <Register action='register' setToken={setToken}/>\r\n            </Route>\r\n\r\n            <Route path ='/login'>\r\n                <Register action='login' setToken={setToken}/>\r\n            </Route>\r\n        \r\n        </>\r\n    );\r\n};\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}