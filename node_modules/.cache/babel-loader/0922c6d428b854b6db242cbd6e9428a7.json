{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/StrangersThings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Projects/StrangersThings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{Link,useHistory,useParams}from'react-router-dom';import{callApi}from'../api';import MessageForm from'./MessageForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Post=function Post(_ref){var posts=_ref.posts,post=_ref.post,token=_ref.token;var _useParams=useParams(),postId=_useParams.postId;var history=useHistory();if(posts.length===0)return null;var postToRender;if(post){postToRender=post;}else{postToRender=posts.find(function(post){return postId===post._id;});}var onDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return callApi({url:\"/posts/\".concat(postToRender._id),method:'DELETE',token:token});case 3:data=_context.sent;history.push('/posts');window.location.reload();case 6:case\"end\":return _context.stop();}}},_callee);}));return function onDelete(_x){return _ref2.apply(this,arguments);};}();console.log(\"post\",postToRender);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"u\",{children:postToRender.title})}),postToRender.author.username?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Submitted by:\"}),\" \",postToRender.author.username]}):null,/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Description:\"}),\" \",postToRender.description]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Price:\"}),\" \",postToRender.price]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Location:\"}),\" \",postToRender.location]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Delivers:\"}),\" \",postToRender.willDeliver?'Yes':'No']}),!post?/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:\"Back to all posts\"}):null,postToRender.isAuthor?/*#__PURE__*/_jsxs(_Fragment,{children:[postToRender.messages.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Sender:\"}),\" \",message.fromUser.username,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"23px\"},children:\"Message:\"}),\" \",message.content]})]});}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/EditPost/\"+postToRender._id,children:\"Edit Post\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:onDelete,children:\"Delete Post\"})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MessageForm,{postID:postToRender._id,token:token})})]});};export default Post;","map":{"version":3,"sources":["C:/Projects/StrangersThings/src/components/Post.js"],"names":["React","Link","useHistory","useParams","callApi","MessageForm","Post","posts","post","token","postId","history","length","postToRender","find","_id","onDelete","event","preventDefault","url","method","data","push","window","location","reload","console","log","title","author","username","fontSize","description","price","willDeliver","isAuthor","messages","map","message","fromUser","content"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Link, useHistory, useParams } from 'react-router-dom';\r\nimport { callApi } from '../api';\r\nimport MessageForm from './MessageForm';\r\n\r\n\r\n\r\n\r\nconst Post = ({posts, post, token}) => {\r\n    const { postId } = useParams();\r\n    const history = useHistory();\r\n\r\n    if (posts.length === 0) return null;\r\n\r\n    let postToRender;\r\n\r\n    if (post) {\r\n        postToRender = post;\r\n    } else {\r\n        postToRender = posts.find((post) => postId === post._id);\r\n    }\r\n\r\n        \r\n        const onDelete = async (event) => {\r\n            event.preventDefault();\r\n    \r\n    \r\n            const data = await callApi({\r\n                url: `/posts/${postToRender._id}`,\r\n                method: 'DELETE',\r\n                token,\r\n            });\r\n        \r\n    \r\n                history.push('/posts');\r\n                window.location.reload()\r\n        }\r\n\r\n        console.log(\"post\", postToRender)\r\n         return (\r\n        \r\n        <>\r\n        \r\n            <h2><u>{postToRender.title}</u></h2>\r\n            {postToRender.author.username\r\n            ? \r\n            <div><b style ={{fontSize:\"23px\"}}>Submitted by:</b> {postToRender.author.username }</div>\r\n            :\r\n            null\r\n            }\r\n            <div><b style ={{fontSize:\"23px\"}}>Description:</b> {postToRender.description}</div>\r\n            <div><b style ={{fontSize:\"23px\"}}>Price:</b> {postToRender.price}</div>\r\n            <div><b style ={{fontSize:\"23px\"}}>Location:</b> {postToRender.location}</div>\r\n            <div><b style ={{fontSize:\"23px\"}}>Delivers:</b> {postToRender.willDeliver ? 'Yes' : 'No'}</div>\r\n            {!post ? <Link to=\"/posts\">Back to all posts</Link> : null}\r\n            {postToRender.isAuthor \r\n            ? \r\n            <>\r\n            {postToRender.messages.map ((message) => {\r\n                return (\r\n                <div>\r\n                    <div><b style ={{fontSize:\"23px\"}}>Sender:</b> {message.fromUser.username} </div>\r\n                    <div><b style ={{fontSize:\"23px\"}}>Message:</b> {message.content}</div>\r\n                </div>\r\n                )\r\n            \r\n            }\r\n\r\n            )\r\n            } \r\n            <button>\r\n            <Link to={\"/EditPost/\" + postToRender._id}>Edit Post</Link>\r\n            </button>\r\n            <button onClick={onDelete}>Delete Post</button> \r\n            </>\r\n            : \r\n            <>\r\n            <MessageForm postID = {postToRender._id} token = {token}/>\r\n            </>\r\n} \r\n  </>       \r\n    );\r\n};\r\n\r\n\r\nexport default Post;"]},"metadata":{},"sourceType":"module"}