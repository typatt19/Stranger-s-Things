{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/StrangersThings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Projects/StrangersThings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Projects/StrangersThings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link,useHistory,useParams}from'react-router-dom';import{callApi}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditPost=function EditPost(_ref){var token=_ref.token,posts=_ref.posts;var history=useHistory();var _useParams=useParams(),postId=_useParams.postId;if(posts.length===0)return null;var postToRender=posts.find(function(post){return postId===post._id;});console.log(\"EditPosts\",posts);console.log(\"EditPosts\",postId);var _useState=useState(postToRender.title),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(postToRender.description),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(postToRender.price),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(postToRender.location),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(postToRender.willDeliver),_useState10=_slicedToArray(_useState9,2),willDeliver=_useState10[0],setWillDeliver=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return callApi({url:\"/posts/\".concat(postToRender._id),method:'PATCH',body:{post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}},token:token});case 3:data=_context.sent;history.push('/posts');window.location.reload();console.log(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{id:\"TextField\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:title,onChange:function onChange(event){return setTitle(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Description\",value:description,onChange:function onChange(event){return setDescription(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Price\",value:price,onChange:function onChange(event){return setPrice(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location\",value:location,onChange:function onChange(event){return setLocation(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:willDeliver,onChange:function onChange(event){return setWillDeliver(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sumbit Edit\"})]}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})})]});};export default EditPost;","map":{"version":3,"sources":["C:/Projects/StrangersThings/src/components/EditPost.js"],"names":["React","useState","Link","useHistory","useParams","callApi","EditPost","token","posts","history","postId","length","postToRender","find","post","_id","console","log","title","setTitle","description","setDescription","price","setPrice","location","setLocation","willDeliver","setWillDeliver","handleSubmit","event","preventDefault","url","method","body","data","push","window","reload","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useHistory, useParams } from 'react-router-dom';\r\nimport { callApi } from '../api';\r\n\r\n\r\nconst EditPost = ({token, posts}) => {\r\n    const history = useHistory();\r\n    const {postId} = useParams();\r\n    if (posts.length === 0) return null;\r\n\r\n    let postToRender = posts.find((post) => postId === post._id);\r\n    console.log(\"EditPosts\", posts)\r\n    console.log(\"EditPosts\", postId)\r\n\r\n\r\n\r\n    const [title, setTitle] = useState(postToRender.title);\r\n    const [description, setDescription] = useState(postToRender.description);\r\n    const [price, setPrice] = useState(postToRender.price);\r\n    const [location, setLocation] = useState(postToRender.location);\r\n    const [willDeliver, setWillDeliver] = useState(postToRender.willDeliver);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n\r\n        const data = await callApi({\r\n            url: `/posts/${postToRender._id}`,\r\n            method: 'PATCH',\r\n            body:{\r\n                post: {\r\n                  title: title,\r\n                  description: description,\r\n                  price: price,\r\n                  location: location,\r\n                  willDeliver: willDeliver,\r\n                }\r\n            }, \r\n              token\r\n        });\r\n    \r\n\r\n            history.push('/posts');\r\n            window.location.reload()\r\n        console.log(data)\r\n    };\r\n    \r\n    \r\n    return (\r\n        <>\r\n            <h2>Edit Post</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div id =\"TextField\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Title\"\r\n                    value={title}\r\n                    onChange={(event) => setTitle(event.target.value)}\r\n                ></input>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Description\"\r\n                    value={description}\r\n                    onChange={(event) => setDescription(event.target.value)}\r\n                ></input>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Price\"\r\n                    value={price}\r\n                    onChange={(event) => setPrice(event.target.value)}\r\n                ></input>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Location\"\r\n                    value={location}\r\n                    onChange={(event) => setLocation(event.target.value)}\r\n                ></input>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    value={willDeliver}\r\n                    onChange={(event) => setWillDeliver(event.target.value)}\r\n                ></input>\r\n                </div>\r\n                <button type=\"submit\">Sumbit Edit</button>\r\n            </form>\r\n            <button>\r\n                <Link to=\"/\">Home</Link>\r\n            </button>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default EditPost;"]},"metadata":{},"sourceType":"module"}